generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["pc_komponenten"]
}

model Hersteller {
  id             Int          @id @default(autoincrement())
  name           String       @unique
  gruendungsjahr Int?

  // Plural, da 1:N-Beziehung
  komponenten    Komponente[]

  @@map("hersteller")
  @@schema("pc_komponenten")
}

model Komponente {
  id            Int            @id @default(autoincrement())
  version       Int            @default(0)
  name          String
  typ           Komponententyp?
  preis         Decimal        @db.Decimal(8, 2)
  // camelCase mit @map
  herstellerId  Int            @map("hersteller_id")

  // Beziehung mit dem camelCase-Namen
  hersteller    Hersteller     @relation(fields: [herstellerId], references: [id], onUpdate: NoAction)
  spezifikation Spezifikation?

  @@map("komponente")
  @@schema("pc_komponenten")
}

model Spezifikation {
  id            Int        @id @default(autoincrement())
  // camelCase mit @map
  kerntaktMhz   Int?       @map("kerntakt_mhz")
  speicherGb    Int?       @map("speicher_gb")
  leserateMbps  Int?       @map("leserate_mbps")
  komponenteId  Int        @unique @map("komponente_id")

  // Beziehung mit dem camelCase-Namen
  komponente    Komponente @relation(fields: [komponenteId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([komponenteId])
  @@map("spezifikation")
  @@schema("pc_komponenten")
}

// PascalCase f√ºr den Enum-Namen
enum Komponententyp {
  CPU
  GPU
  RAM
  SSD

  @@map("komponententyp")
  @@schema("pc_komponenten")
}
